pprules=$(if [ -f wp-config.php ]; then db=$(grep -i db_name wp-config.php |awk -F"'" '{print $4}'); password=$(grep DB_PASSWORD wp-config.php | cut -d"'" -f4); user=$(grep DB_USER wp-config.php | cut -d"'" -f4); prefix=$(grep -i table_prefix wp-config.php |awk -F"'" '{print $2}'); table=$(echo "$prefix"options); cereal=$(mysql -u $user -p$password -e "use $db; SELECT option_value FROM ${prefix}options WHERE option_name LIKE '%post_process%'" 2>/dev/null | tail -n+2); echo -e "\n\n$cereal"; else echo nope; fi | sed -r 's/\#\"\;s\:([0-9]*)\:\"/\#\ \=\>\ /g' | sed -r 's/(s*)\"\;s\:([0-9]*)\:\"/\n/g' | sed -r 's/a\:([0-9]*)\:\{s\:([0-9]*)\:\"//' | sed -r 's/\"\;\}$//' | grep -v '^$'); ppcount=$(echo "$pprules" | wc -l); echo -e "\n\n------------------------------------------------------------------\nI found ${yellow}$ppcount${NC} post-processing rules currently for install ${red}$(pwd | cut -d'/' -f5)${NC}.\n------------------------------------------------------------------\n\n"; echo "$pprules"
